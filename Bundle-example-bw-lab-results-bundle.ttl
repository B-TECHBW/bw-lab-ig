@prefix fhir: <http://hl7.org/fhir/> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

# - resource -------------------------------------------------------------------

<http://b-techbw.github.io/bw-lab-ig/Bundle/example-bw-lab-results-bundle> a fhir:Bundle;
  fhir:nodeRole fhir:treeRoot;
  fhir:Resource.id [ fhir:value "example-bw-lab-results-bundle"];
  fhir:Bundle.type [ fhir:value "transaction"];
  fhir:Bundle.entry [
     fhir:index 0;
     fhir:Bundle.entry.resource [
       a fhir:Patient;
       fhir:Resource.id [ fhir:value "example-ipms-patient" ];
       fhir:Resource.meta [
         fhir:Meta.profile [
           fhir:value "http://b-techbw.github.io/bw-lab-ig/StructureDefinition/bw-patient";
           fhir:index 0;
           fhir:link <http://b-techbw.github.io/bw-lab-ig/StructureDefinition/bw-patient>
         ]
       ];
       fhir:DomainResource.text [
         fhir:Narrative.status [ fhir:value "generated" ];
         fhir:Narrative.div "<div xmlns=\"http://www.w3.org/1999/xhtml\"><p><b>Generated Narrative</b></p><p><b>identifier</b>: MR: urn:uuid:&lt;IPMS Patient ID&gt;, id: &lt;OmangNumber&gt; (OFFICIAL)</p><p><b>name</b>: Demo IpmsPatient (OFFICIAL)</p><p><b>gender</b>: male</p><p><b>birthDate</b>: 1948-01-22</p><p><b>managingOrganization</b>: <a href=\"Organization-example-facility-order-reciever.html\">Generated Summary: id: MOH001; active</a></p></div>"
       ];
       fhir:Patient.identifier [
         fhir:index 0;
         fhir:Identifier.type [
           fhir:CodeableConcept.coding [
             fhir:index 0;
             fhir:Coding.code [ fhir:value "MR" ]
           ]
         ];
         fhir:Identifier.system [ fhir:value "urn:ietf:rfc:3986" ];
         fhir:Identifier.value [ fhir:value "urn:uuid:<IPMS Patient ID>" ]
       ], [
         fhir:index 1;
         fhir:Identifier.use [ fhir:value "official" ];
         fhir:Identifier.system [ fhir:value "http://moh.bw.org/ext/identifier/omang" ];
         fhir:Identifier.value [ fhir:value "<OmangNumber>" ]
       ];
       fhir:Patient.name [
         fhir:index 0;
         fhir:HumanName.use [ fhir:value "official" ];
         fhir:HumanName.family [ fhir:value "IpmsPatient" ];
         fhir:HumanName.given [
           fhir:value "Demo";
           fhir:index 0
         ]
       ];
       fhir:Patient.gender [ fhir:value "male" ];
       fhir:Patient.birthDate [ fhir:value "1948-01-22"^^xsd:date ];
       fhir:Patient.managingOrganization [
         fhir:link <http://b-techbw.github.io/bw-lab-ig/Organization/example-facility-order-reciever>;
         fhir:Reference.reference [ fhir:value "Organization/example-facility-order-reciever" ]
       ]
     ];
     fhir:Bundle.entry.request [
       fhir:Bundle.entry.request.method [ fhir:value "PUT" ];
       fhir:Bundle.entry.request.url [ fhir:value "Patient/example-ipms-patient" ]
     ]
  ], [
     fhir:index 1;
     fhir:Bundle.entry.resource [
       a fhir:ServiceRequest;
       fhir:Resource.id [ fhir:value "example-bw-ipms-service-request" ];
       fhir:Resource.meta [
         fhir:Meta.profile [
           fhir:value "http://b-techbw.github.io/bw-lab-ig/StructureDefinition/bw-basic-service-request";
           fhir:index 0;
           fhir:link <http://b-techbw.github.io/bw-lab-ig/StructureDefinition/bw-basic-service-request>
         ]
       ];
       fhir:DomainResource.text [
         fhir:Narrative.status [ fhir:value "generated" ];
         fhir:Narrative.div "<div xmlns=\"http://www.w3.org/1999/xhtml\"><p><b>Generated Narrative</b></p><p><b>status</b>: active</p><p><b>intent</b>: order</p><p><b>code</b>: <span title=\"Codes: {http://moh.bw.org/ext/laboratory/pims-lab-test-code COVID}\">SARS-CoV-2 PCR</span></p><p><b>subject</b>: <a href=\"#Patient_example-ipms-patient\">See above (Patient/example-ipms-patient)</a></p></div>"
       ];
       fhir:ServiceRequest.status [ fhir:value "active" ];
       fhir:ServiceRequest.intent [ fhir:value "order" ];
       fhir:ServiceRequest.code [
         fhir:CodeableConcept.coding [
           fhir:index 0;
           fhir:Coding.system [ fhir:value "http://moh.bw.org/ext/laboratory/pims-lab-test-code" ];
           fhir:Coding.code [ fhir:value "COVID" ];
           fhir:Coding.display [ fhir:value "SARS-CoV-2 PCR" ]
         ]
       ];
       fhir:ServiceRequest.subject [
         fhir:link <http://b-techbw.github.io/bw-lab-ig/Patient/example-ipms-patient>;
         fhir:Reference.reference [ fhir:value "Patient/example-ipms-patient" ]
       ]
     ];
     fhir:Bundle.entry.request [
       fhir:Bundle.entry.request.method [ fhir:value "PUT" ];
       fhir:Bundle.entry.request.url [ fhir:value "ServiceRequest/example-bw-ipms-service-request" ]
     ]
  ], [
     fhir:index 2;
     fhir:Bundle.entry.resource [
       a fhir:DiagnosticReport;
       fhir:Resource.id [ fhir:value "example-bw-ipms-diagnostic-report" ];
       fhir:Resource.meta [
         fhir:Meta.profile [
           fhir:value "http://b-techbw.github.io/bw-lab-ig/StructureDefinition/bw-lab-diagnostic-report";
           fhir:index 0;
           fhir:link <http://b-techbw.github.io/bw-lab-ig/StructureDefinition/bw-lab-diagnostic-report>
         ]
       ];
       fhir:DomainResource.text [
         fhir:Narrative.status [ fhir:value "generated" ];
         fhir:Narrative.div "<div xmlns=\"http://www.w3.org/1999/xhtml\"><p><b>Generated Narrative</b></p><p><b>identifier</b>: FILL: ?ngen-9?</p><p><b>status</b>: final</p><p><b>category</b>: <span title=\"Codes: \">LAB</span></p><p><b>code</b>: <span title=\"Codes: {L COVID}\">SARS-CoV-2 PCR</span></p><p><b>subject</b>: <a href=\"example-ipms-patient\">example-ipms-patient</a></p><p><b>effective</b>: Jun 3, 2021, 2:00:00 PM</p><p><b>result</b>: </p><ul><li><a href=\"#Observation_example-bw-ipms-obs-1\">See above (Observation/example-bw-ipms-obs-1)</a></li><li><a href=\"#Observation_example-bw-ipms-obs-2\">See above (Observation/example-bw-ipms-obs-2)</a></li></ul></div>"
       ];
       fhir:DiagnosticReport.identifier [
         fhir:index 0;
         fhir:Identifier.type [
           fhir:CodeableConcept.coding [
             fhir:index 0;
             fhir:Coding.code [ fhir:value "FILL" ]
           ], [
             fhir:index 1;
             fhir:Coding.system [ fhir:value "http://terminology.hl7.org/CodeSystem/v2-0203" ]
           ]
         ]
       ];
       fhir:DiagnosticReport.status [ fhir:value "final" ];
       fhir:DiagnosticReport.category [
         fhir:index 0;
         fhir:CodeableConcept.coding [
           fhir:index 0;
           fhir:Coding.code [ fhir:value "LAB" ]
         ]
       ];
       fhir:DiagnosticReport.code [
         fhir:CodeableConcept.coding [
           fhir:index 0;
           fhir:Coding.system [ fhir:value "L" ];
           fhir:Coding.code [ fhir:value "COVID" ];
           fhir:Coding.display [ fhir:value "SARS-CoV-2 PCR" ]
         ]
       ];
       fhir:DiagnosticReport.subject [
         fhir:Reference.reference [ fhir:value "example-ipms-patient" ];
         fhir:Reference.type [ fhir:value "Patient" ]
       ];
       fhir:DiagnosticReport.effectiveDateTime [ fhir:value "2021-06-03T14:00:00.000Z"^^xsd:dateTime ];
       fhir:DiagnosticReport.result [
         fhir:index 0;
         fhir:link <http://b-techbw.github.io/bw-lab-ig/Observation/example-bw-ipms-obs-1>;
         fhir:Reference.reference [ fhir:value "Observation/example-bw-ipms-obs-1" ];
         fhir:Reference.type [ fhir:value "Observation" ]
       ], [
         fhir:index 1;
         fhir:link <http://b-techbw.github.io/bw-lab-ig/Observation/example-bw-ipms-obs-2>;
         fhir:Reference.reference [ fhir:value "Observation/example-bw-ipms-obs-2" ];
         fhir:Reference.type [ fhir:value "Observation" ]
       ]
     ];
     fhir:Bundle.entry.request [
       fhir:Bundle.entry.request.method [ fhir:value "PUT" ];
       fhir:Bundle.entry.request.url [ fhir:value "DiagnosticReport/example-bw-ipms-diagnostic-report" ]
     ]
  ], [
     fhir:index 3;
     fhir:Bundle.entry.resource [
       a fhir:Observation;
       fhir:Resource.id [ fhir:value "example-bw-ipms-obs-1" ];
       fhir:Resource.meta [
         fhir:Meta.profile [
           fhir:value "http://b-techbw.github.io/bw-lab-ig/StructureDefinition/bw-lab-observation";
           fhir:index 0;
           fhir:link <http://b-techbw.github.io/bw-lab-ig/StructureDefinition/bw-lab-observation>
         ]
       ];
       fhir:DomainResource.text [
         fhir:Narrative.status [ fhir:value "generated" ];
         fhir:Narrative.div "<div xmlns=\"http://www.w3.org/1999/xhtml\"><p><b>Generated Narrative</b></p><p></p><p><b>category</b>: <span title=\"Codes: {http://terminology.hl7.org/CodeSystem/observation-category laboratory}\">Laboratory</span></p><p><b>code</b>: <span title=\"Codes: {L COVID}\">SARS-CoV-2 PCR</span></p><p><b>subject</b>: <a href=\"#Patient_example-ipms-patient\">See above (Patient/example-ipms-patient)</a></p><p><b>effective</b>: Jun 10, 2021, 3:49:00 PM</p><p><b>performer</b>: <a href=\"Organization-example-facility-order-reciever.html\">Generated Summary: id: MOH001; active</a></p><p><b>value</b>: INCONCLUSIVE</p><p><b>interpretation</b>: <span title=\"Codes: {http://terminology.hl7.org/CodeSystem/v3-ObservationInterpretation N}\">Normal</span></p></div>"
       ];
       fhir:Observation.status [ fhir:value "final" ];
       fhir:Observation.category [
         fhir:index 0;
         fhir:CodeableConcept.coding [
           fhir:index 0;
           fhir:Coding.system [ fhir:value "http://terminology.hl7.org/CodeSystem/observation-category" ];
           fhir:Coding.code [ fhir:value "laboratory" ]
         ]
       ];
       fhir:Observation.code [
         fhir:CodeableConcept.coding [
           fhir:index 0;
           fhir:Coding.system [ fhir:value "L" ];
           fhir:Coding.code [ fhir:value "COVID" ];
           fhir:Coding.display [ fhir:value "SARS-CoV-2 PCR" ]
         ]
       ];
       fhir:Observation.subject [
         fhir:link <http://b-techbw.github.io/bw-lab-ig/Patient/example-ipms-patient>;
         fhir:Reference.reference [ fhir:value "Patient/example-ipms-patient" ];
         fhir:Reference.type [ fhir:value "Patient" ]
       ];
       fhir:Observation.effectiveDateTime [ fhir:value "2021-06-10T15:49:00.000Z"^^xsd:dateTime ];
       fhir:Observation.performer [
         fhir:index 0;
         fhir:link <http://b-techbw.github.io/bw-lab-ig/Organization/example-facility-order-reciever>;
         fhir:Reference.reference [ fhir:value "Organization/example-facility-order-reciever" ]
       ];
       fhir:Observation.valueString [ fhir:value "INCONCLUSIVE" ];
       fhir:Observation.interpretation [
         fhir:index 0;
         fhir:CodeableConcept.coding [
           fhir:index 0;
           fhir:Coding.system [ fhir:value "http://terminology.hl7.org/CodeSystem/v3-ObservationInterpretation" ];
           fhir:Coding.code [ fhir:value "N" ];
           fhir:Coding.display [ fhir:value "Normal" ]
         ]
       ]
     ];
     fhir:Bundle.entry.request [
       fhir:Bundle.entry.request.method [ fhir:value "PUT" ];
       fhir:Bundle.entry.request.url [ fhir:value "Observation/example-bw-ipms-obs-1" ]
     ]
  ], [
     fhir:index 4;
     fhir:Bundle.entry.resource [
       a fhir:Observation;
       fhir:Resource.id [ fhir:value "example-bw-ipms-obs-2" ];
       fhir:Resource.meta [
         fhir:Meta.profile [
           fhir:value "http://b-techbw.github.io/bw-lab-ig/StructureDefinition/bw-lab-observation";
           fhir:index 0;
           fhir:link <http://b-techbw.github.io/bw-lab-ig/StructureDefinition/bw-lab-observation>
         ]
       ];
       fhir:DomainResource.text [
         fhir:Narrative.status [ fhir:value "generated" ];
         fhir:Narrative.div "<div xmlns=\"http://www.w3.org/1999/xhtml\"><p><b>Generated Narrative</b></p><p></p><p><b>category</b>: <span title=\"Codes: {http://terminology.hl7.org/CodeSystem/observation-category laboratory}\">Laboratory</span></p><p><b>code</b>: <span title=\"Codes: {L S-Cov-2-RVW}\">SARS-CoV-2 PCR REVIEW</span></p><p><b>subject</b>: <a href=\"#Patient_example-ipms-patient\">See above (Patient/example-ipms-patient)</a></p><p><b>effective</b>: Jun 10, 2021, 3:49:00 PM</p><p><b>performer</b>: <a href=\"Organization-example-facility-order-reciever.html\">Generated Summary: id: MOH001; active</a></p><p><b>value</b>: .</p><p><b>interpretation</b>: <span title=\"Codes: {http://terminology.hl7.org/CodeSystem/v3-ObservationInterpretation N}\">Normal</span></p></div>"
       ];
       fhir:Observation.status [ fhir:value "final" ];
       fhir:Observation.category [
         fhir:index 0;
         fhir:CodeableConcept.coding [
           fhir:index 0;
           fhir:Coding.system [ fhir:value "http://terminology.hl7.org/CodeSystem/observation-category" ];
           fhir:Coding.code [ fhir:value "laboratory" ]
         ]
       ];
       fhir:Observation.code [
         fhir:CodeableConcept.coding [
           fhir:index 0;
           fhir:Coding.system [ fhir:value "L" ];
           fhir:Coding.code [ fhir:value "S-Cov-2-RVW" ];
           fhir:Coding.display [ fhir:value "SARS-CoV-2 PCR REVIEW" ]
         ]
       ];
       fhir:Observation.subject [
         fhir:link <http://b-techbw.github.io/bw-lab-ig/Patient/example-ipms-patient>;
         fhir:Reference.reference [ fhir:value "Patient/example-ipms-patient" ];
         fhir:Reference.type [ fhir:value "Patient" ]
       ];
       fhir:Observation.effectiveDateTime [ fhir:value "2021-06-10T15:49:00.000Z"^^xsd:dateTime ];
       fhir:Observation.performer [
         fhir:index 0;
         fhir:link <http://b-techbw.github.io/bw-lab-ig/Organization/example-facility-order-reciever>;
         fhir:Reference.reference [ fhir:value "Organization/example-facility-order-reciever" ]
       ];
       fhir:Observation.valueString [ fhir:value "." ];
       fhir:Observation.interpretation [
         fhir:index 0;
         fhir:CodeableConcept.coding [
           fhir:index 0;
           fhir:Coding.system [ fhir:value "http://terminology.hl7.org/CodeSystem/v3-ObservationInterpretation" ];
           fhir:Coding.code [ fhir:value "N" ];
           fhir:Coding.display [ fhir:value "Normal" ]
         ]
       ]
     ];
     fhir:Bundle.entry.request [
       fhir:Bundle.entry.request.method [ fhir:value "PUT" ];
       fhir:Bundle.entry.request.url [ fhir:value "Observation/example-bw-ipms-obs-2" ]
     ]
  ] .

# - ontology header ------------------------------------------------------------

<http://b-techbw.github.io/bw-lab-ig/Bundle/example-bw-lab-results-bundle.ttl> a owl:Ontology;
  owl:imports fhir:fhir.ttl .

# -------------------------------------------------------------------------------------

